üëâ**–ö—Ä–∞—Ç–∫–æ –æ —Å—É—Ç–∏**: –æ–±—É—á–∞—é—â–∏–π –¥–µ–º–æ-–±–ª–æ–≥ –ø–æ—Å—Ç –æ –ø–∞—Ä—Å–∏–Ω–≥–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å 2017 –ø–æ 2021 –≥–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—è –ø–∞–≥–∏–Ω–∞—Ü–∏—é, –∞ —Ç–∞–∫ –∂–µ, —Ü–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å Google Scholar, –∏ –∏—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ CSV –∏ SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—è Python –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –≤–µ–±-—Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞ –æ—Ç SerpApi.

üî®**–ß—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è**: –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ü–∏–∫–ª–æ–≤, —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –∏, –±–∞–∑–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ `CSS` —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤. –ê —Ç–∞–∫ –∂–µ `serpapi`, `urllib`, `pandas`, `sqlite3` –±–∏–±–ª–∏–æ—Ç–µ–∫.

‚è±Ô∏è**–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–π–º–µ—Ç**: ~20-60 –º–∏–Ω—É—Ç –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.

___

- <a href="#what_will_be_scraped">–ß—Ç–æ –ø–∞—Ä—Å–∏–º</a>
    - <a href="#prerequisites">–ß—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è</a>
- <a href="#process">–ü—Ä–æ—Ü–µ—Å—Å</a>
    - <a href="#organic_results">–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</a>
    - <a href="#cite_results">–¶–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</a>
    - <a href="#save_csv">–°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ CSV</a>
    - <a href="#save_sqlite">–°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ SQLite</a>
- <a href="#full_code">–ö–æ–¥ —Ü–µ–ª–∏–∫–æ–º - –ø–∞—Ä—Å–∏–Ω–≥</a>
- <a href="#saving_code">–ö–æ–¥ —Ü–µ–ª–∏–∫–æ–º - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</a>
- <a href="#links">–°—Å—ã–ª–∫–∏</a>
- <a href="#outro">–ß—Ç–æ –¥–∞–ª—å—à–µ</a>


<h2 id="what_will_be_scraped">–ß—Ç–æ –ø–∞—Ä—Å–∏–º</h2>

–ò–∑ –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

![what_will_be_scraped_1_01](https://user-images.githubusercontent.com/78694043/147768216-70816917-01f4-490a-854a-3ac1ad5f83ed.png)

üìå–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ù–∞ Google Scholar –µ—Å—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –≤ 100 —Å—Ç—Ä–∞–Ω–∏—Ü, –ø–æ—ç—Ç–æ–º—É –∫–æ–≥–¥–∞ –≤—ã –≤–∏–¥–∏—Ç–µ `About xxx.xxx results` —ç—Ç–æ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏ –∏—Ö –º–æ–∂–Ω–æ —Å–ø–∞—Ä—Å–∏—Ç—å. –¢–∞–∫ –∂–µ –∫–∞–∫ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ì—É–≥–ª –ø–æ–∏—Å–∫–æ–º.


–ò–∑ —Ü–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

![what_will_be_scraped_3](https://user-images.githubusercontent.com/78694043/147768207-27016821-7ae9-4243-8e3b-29ebb1a097c2.png)


<h2 id="prerequisites">–ß—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è</h2>

**–û—Ç–¥–µ–ª—å–Ω–æ–µ –≤–∏—Ä—É—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**

–ï—Å–ª–∏ –≤—ã –Ω–µ –∏–º–µ–ª–∏ –¥–µ–ª–æ —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º —Ä–∞–Ω–µ–µ, –≤–∑–≥–ª—è–Ω–∏—Ç–µ –Ω–∞ –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π —ç—Ç–æ–º—É –±–ª–æ–≥ –ø–æ—Å—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ - [Python virtual environments tutorial using Virtualenv and Poetry](https://serpapi.com/blog/python-virtual-environments-using-virtualenv-and-poetry/).

–í–∫—Ä–∞—Ç—Ü–µ, —ç—Ç–æ —à—Ç—É–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –Ω–∞–±–æ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –≤–∫–ª—é—á–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π Python –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–æ—Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, —á—Ç–æ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π Python.

üìå–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫:

```lang-none
pip install google-search-results
pip install pandas
```

____

<h2 id="process">–ü—Ä–æ—Ü–µ—Å—Å</h2>

![google_scholar_process_1_03_1](https://user-images.githubusercontent.com/78694043/146953943-dd19ebfa-7080-41bc-b674-4a1af7619d8a.png)

–ï—Å–ª–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –Ω–µ –Ω—É–∂–Ω–æ:
- –∑–∞–±–∏—Ä–∞–π—Ç–µ –∫–æ–¥ –≤ —Å–µ–∫—Ü–∏–∏ <a href="#full_code">–≤–µ—Å—å –∫–æ–¥ —Ü–µ–ª–∏–∫–æ–º</a>,
- [–∑–∞–±–∏—Ä–∞–π—Ç–µ –∫–æ–¥ —Ü–µ–ª–∏–∫–æ–º –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](https://github.com/dimitryzub/py-google-scholar-organic-cite-to-csv-sqlite),
- [–ø—Ä–æ–±—É–π—Ç–µ —Å—Ä–∞–∑—É –≤ online IDE](https://replit.com/@serpapi/Scrape-historic-Google-Scholar-Organic-and-Citation-results#main.py).

___

![google_scholar_organic_results_2_1](https://user-images.githubusercontent.com/78694043/146953922-60c1b7a9-8783-43d0-902f-d291a1a99273.png)

<h2 id="organic_results">–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>

```python
import os
from serpapi import GoogleSearch
from urllib.parse import urlsplit, parse_qsl


def organic_results():
    print("extracting organic results..")

    params = {
        "api_key": os.getenv("API_KEY"), # –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ SerpApi 
        "engine": "google_scholar",
        "q": "minecraft redstone system structure characteristics strength",  # –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
        "hl": "en",        # —è–∑—ã–∫
        "as_ylo": "2017",  # —Å 2017
        "as_yhi": "2021",  # –¥–æ 2021
        "start": "0"       # –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    }

    search = GoogleSearch(params)

    organic_results_data = []

    loop_is_true = True

    while loop_is_true:
        results = search.get_dict()

        print(f"Currently extracting page ‚Ññ{results['serpapi_pagination']['current']}..")

        for result in results["organic_results"]:
            position = result["position"]
            title = result["title"]
            publication_info_summary = result["publication_info"]["summary"]
            result_id = result["result_id"]
            link = result.get("link")
            result_type = result.get("type")
            snippet = result.get("snippet")
  
            try:
              file_title = result["resources"][0]["title"]
            except: file_title = None
  
            try:
              file_link = result["resources"][0]["link"]
            except: file_link = None
  
            try:
              file_format = result["resources"][0]["file_format"]
            except: file_format = None
  
            try:
              cited_by_count = int(result["inline_links"]["cited_by"]["total"])
            except: cited_by_count = None
  
            cited_by_id = result.get("inline_links", {}).get("cited_by", {}).get("cites_id", {})
            cited_by_link = result.get("inline_links", {}).get("cited_by", {}).get("link", {})
  
            try:
              total_versions = int(result["inline_links"]["versions"]["total"])
            except: total_versions = None
  
            all_versions_link = result.get("inline_links", {}).get("versions", {}).get("link", {})
            all_versions_id = result.get("inline_links", {}).get("versions", {}).get("cluster_id", {})
  
            organic_results_data.append({
              "page_number": results["serpapi_pagination"]["current"],
              "position": position + 1,
              "result_type": result_type,
              "title": title,
              "link": link,
              "result_id": result_id,
              "publication_info_summary": publication_info_summary,
              "snippet": snippet,
              "cited_by_count": cited_by_count,
              "cited_by_link": cited_by_link,
              "cited_by_id": cited_by_id,
              "total_versions": total_versions,
              "all_versions_link": all_versions_link,
              "all_versions_id": all_versions_id,
              "file_format": file_format,
              "file_title": file_title,
              "file_link": file_link,
            })

            if "next" in results["serpapi_pagination"]:
                search.params_dict.update(dict(parse_qsl(urlsplit(results["serpapi_pagination"]["next"]).query)))
            else:
                loop_is_true = False

    return organic_results_data
```

### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—è –ø–∞–≥–∏–Ω–∞—Ü–∏—é

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º `os`, `serpapi`, `urllib` –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```python
import os
from serpapi import GoogleSearch
from urllib.parse import urlsplit, parse_qsl
```

–°–æ–∑–¥–∞–µ–º –∏ –ø–µ—Ä–µ–¥–∞–µ–º –ø–æ–∏—Å–∫–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `GoogleSearch()` –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—Å–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –±—ç–∫–µ–Ω–¥–µ SerpApi:

```python
params = {
  "api_key": os.getenv("API_KEY"), # –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ SerpApi
  "engine": "google_scholar",
  "q": "minecraft redstone system structure characteristics strength",  # –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
  "hl": "en",        # —è–∑—ã–∫
  "as_ylo": "2017",  # —Å 2017
  "as_yhi": "2021",  # –¥–æ 2021
  "start": "0"       # –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
}

search = GoogleSearch(params) # –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç—É—Ç
```

–°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ `list()` –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥–∞–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ CSV –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã`cite_results()` —Ñ—É–Ω–∫—Ü–∏–∏:

```python
organic_results_data = []
```

–°–æ–∑–¥–∞—ë–º `while` —Ü–∏–∫–ª –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü:

```python
loop_is_true = True

while loop_is_true:
    results = search.get_dict()
    
    # –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç—É—Ç–∞—á–∫–∏..
    
    if "next" in results["serpapi_pagination"]:
        search.params_dict.update(dict(parse_qsl(urlsplit(results["serpapi_pagination"]["next"]).query)))
    else:
        loop_is_true = False
```

- –ï—Å–ª–∏ –Ω–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é `"next"` —Å—Ç—Ä–∞–Ω–∏—Ü—É - `while` –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏–≤ `loop_is_true` –Ω–∞ `False`.
- –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é `"next"` —Å—Ç—Ä–∞–Ω–∏—Ü—É, `search.params_dict.update` —Ä–∞–∑–±–µ—Ä–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —á–∞—Å—Ç–∏ –∏ –ø–µ—Ä–µ–¥–∞—Å—Ç –µ—ë –∫ `GoogleSearch(params)` –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

–ü–∞—Ä—Å–∏–º –¥–∞–Ω–Ω—ã–µ –≤ `for` —Ü–∏–∫–ª–µ:

```python
for result in results["organic_results"]:
    position = result["position"]
    title = result["title"]
    publication_info_summary = result["publication_info"]["summary"]
    result_id = result["result_id"]
    link = result.get("link")
    result_type = result.get("type")
    snippet = result.get("snippet")
  
    try:
      file_title = result["resources"][0]["title"]
    except: file_title = None
  
    try:
      file_link = result["resources"][0]["link"]
    except: file_link = None
  
    try:
      file_format = result["resources"][0]["file_format"]
    except: file_format = None
  
    try:
      cited_by_count = int(result["inline_links"]["cited_by"]["total"])
    except: cited_by_count = None
  
    cited_by_id = result.get("inline_links", {}).get("cited_by", {}).get("cites_id", {})
    cited_by_link = result.get("inline_links", {}).get("cited_by", {}).get("link", {})
  
    try:
      total_versions = int(result["inline_links"]["versions"]["total"])
    except: total_versions = None
  
    all_versions_link = result.get("inline_links", {}).get("versions", {}).get("link", {})
    all_versions_id = result.get("inline_links", {}).get("versions", {}).get("cluster_id", {})
```

- `try/except` –±–ª–æ–∫–∏ –±—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ `None` –∑–Ω–∞—á–µ–Ω–∏–π –∫–æ–≥–¥–∞ –æ–Ω–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∏–∑ Google –±—ç–∫–µ–Ω–¥–∞.

–ï—Å–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ –≤ –æ–¥–∏–Ω `try` –±–ª–æ–∫, –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∞–∫–∫—É—Ä–∞—Ç–Ω—ã, –∏–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –µ—Å—Ç—å –≤ –≤—ã–¥–∞—á–µ, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–æ –≤–µ—Ä–Ω—ë—Ç `None`, –ø–æ—ç—Ç–æ–º—É –∑–¥–µ—Å—å –º–Ω–æ–≥–æ `try/except` –±–ª–æ–∫–æ–≤.

–î–æ–±–∞–≤–ª—è–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π `list()` —Å–ø–∏—Å–æ–∫:

```python
organic_results_data = []

# —Ç—É—Ç –ø–∞—Ä—Å–∏–Ω–≥ –∏ while —Ü–∏–∫–ª... 

organic_results_data.append({
    "page_number": results["serpapi_pagination"]["current"],
    "position": position + 1,
    "result_type": result_type,
    "title": title,
    "link": link,
    "result_id": result_id,
    "publication_info_summary": publication_info_summary,
    "snippet": snippet,
    "cited_by_count": cited_by_count,
    "cited_by_link": cited_by_link,
    "cited_by_id": cited_by_id,
    "total_versions": total_versions,
    "all_versions_link": all_versions_link,
    "all_versions_id": all_versions_id,
    "file_format": file_format,
    "file_title": file_title,
    "file_link": file_link,
})
```

–í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π `list()` —Å–ø–∏—Å–æ–∫ —Å –¥–∞–Ω–Ω—ã–º–∏ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–∑–∂–µ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –¶–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

```python
return organic_results_data
```

___

![google_scholar_cite_05_1](https://user-images.githubusercontent.com/78694043/146953960-dc9ad8a5-4715-4627-864e-790a33b82157.jpg)

<h2 id="cite_results">–¶–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>

–í —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–æ–π –≤—ã–¥–∞—á–∏ –∏ –ø–µ—Ä–µ–¥–∞–¥–∏–º `result_id` –≤ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å–ø–∞—Ä—Å–∏—Ç—å —Ü–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –í —Ü–µ–ª–æ–º –Ω–∞–º –Ω—É–∂–µ–Ω —Å–ø–∏—Å–æ–∫ `list()` `result_ids` –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω –≤ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å `"q"`.

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å `result_ids`, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

```python
# –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å–ø–∏—Å–æ–∫ result_ids

result_ids = ["FDc6HiktlqEJ"..."FDc6Hikt21J"]
for citation in result_ids:
    params = {
        "api_key": "API_KEY",             # –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ SerpApi
        "engine": "google_scholar_cite",  # –¥–≤–∏–∂–æ–∫ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ü–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        "q": citation                     # FDc6HiktlqEJ ... FDc6Hikt21J
    }
    search = GoogleSearch(params)
    results = search.get_dict()
    # –¥–∞–ª—å–Ω–µ–π—à–∏–π –∫–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞..
```

–ù–∏–∂–µ –ø—Ä–∏–º–µ—Ä–∞ –∫–æ–¥–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¶–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã —Ç–∞–∫ –∂–µ –Ω–∞–π–¥–µ—Ç–µ –ø–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ç–æ–≥–æ —á—Ç–æ –≤ –Ω—ë–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

```python
import os
from serpapi import GoogleSearch
from google_scholar_organic_results import organic_results

def cite_results():

    print("extracting cite results..")

    citation_results = []

    for citation in organic_results():
        params = {
            "api_key": os.getenv("API_KEY"), # –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ SerpApi
            "engine": "google_scholar_cite", # # –¥–≤–∏–∂–æ–∫ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ü–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            "q": citation["result_id"]       # # FDc6HiktlqEJ ... FDc6Hikt21J
        }

        search = GoogleSearch(params)
        results = search.get_dict()

        print(f"Currently extracting {citation['result_id']} citation ID.")

        for result in results["citations"]:
            cite_title = result["title"]
            cite_snippet = result["snippet"]

            citation_results.append({
                "organic_result_title": citation["title"],
                "organic_result_link": citation["link"],
                "citation_title": cite_title,
                "citation_snippet": cite_snippet
            })

    return citation_results
```

### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ü–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ `list()` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```python
citation_results = []
```

–°–æ–∑–¥–∞—ë–º `for` —Ü–∏–∫–ª –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ `organic_results()` —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∏ –ø–µ—Ä–µ–¥–∞–µ–º `result_id` –≤ `"q"` –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:

```python
for citation in organic_results():
    params = {
      "api_key": os.getenv("API_KEY"), # –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ SerpApi
      "engine": "google_scholar_cite", # # –¥–≤–∏–∂–æ–∫ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ü–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
      "q": citation["result_id"]       # # FDc6HiktlqEJ ... FDc6Hikt21J
    }

    search = GoogleSearch(params)      # –ø–∞—Ä—Å–∏–Ω–≥ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ SerpApi
    results = search.get_dict()        # JSON –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Å–ª–æ–≤–∞—Ä—å
```

–°–æ–∑–¥–∞—ë–º –≤—Ç–æ—Ä–æ–π `for` —Ü–∏–∫–ª –∏ –¥–æ—Å—Ç—É–∫–∏–≤–∞–µ–º—Å—è –¥–æ –¥–∞–Ω–Ω—ã–π —Ç–∞–∫–∏–º –∂–µ —Å–ø–æ—Å–æ–±–æ–º –∫–∞–∫ –∏ –¥–æ —Å–ª–æ–≤–∞—Ä—è:

```python
for result in results["citations"]:
    cite_title = result["title"]
    cite_snippet = result["snippet"]
```

–î–æ–±–∞–≤–ª—è–µ–º –∏–∑–≤–µ–ª—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ `list()` –∫–∞–∫ —Å–ª–æ–≤–∞—Ä—å:

```python
citation_results.append({
    "organic_result_title": citation["title"], # —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å –æ—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –¶–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    "organic_result_link": citation["link"],   # —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å –æ—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –¶–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    "citation_title": cite_title,
    "citation_snippet": cite_snippet
})
```

–í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ `list()`:

```python
return citation_results
```
___


![google_scholar_save_csv_03_1](https://user-images.githubusercontent.com/78694043/146734776-e4b3c29e-a1d8-447c-a980-36b0ac698392.png)

<h2 id="save_csv">–°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ CSV</h2>

–ù–∞–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∏ –¶–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ `DataFrame` `data` –∞—Ä–≥—É–º–µ–Ω—Ç –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å `to_csv()`.

```python
import pandas as pd
from google_scholar_organic_results import organic_results
from google_scholar_cite_results import cite_results

print("waiting for organic results to save..")
pd.DataFrame(data=organic_results())
  .to_csv("google_scholar_organic_results.csv", encoding="utf-8", index=False)

print("waiting for cite results to save..")
pd.DataFrame(data=cite_results())
  .to_csv("google_scholar_citation_results.csv", encoding="utf-8", index=False)
```

### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ CSV

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º `organic_results()` –∏ `cite_results()` –æ—Ç–∫—É–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ, –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `pandas`:

```python
import pandas as pd
from google_scholar_organic_results import organic_results
from google_scholar_cite_results import cite_results
```

–°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã `to_csv()`:

```python
pd.DataFrame(data=organic_results()) \
    .to_csv("google_scholar_organic_results.csv", encoding="utf-8", index=False)
```

–°–æ—Ö—Ä–∞–Ω—è–µ–º —Ü–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã `to_csv()`:

```python
pd.DataFrame(data=cite_results()) \
    .to_csv("google_scholar_citation_results.csv", encoding="utf-8", index=False)
```

- `data` –∞—Ä–≥—É–º–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ `DataFrame` —ç—Ç–æ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
- `encoding='utf-8'` –∞—Ä–≥—É–º–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤—Å–µ –±—ã–ª–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ. –Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —ç—Ç–æ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç —è–≤–Ω–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ —á—Ç–æ —ç—Ç–æ –µ–≥–æ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
- [`index=False`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.index.html) –∞—Ä–≥—É–º–µ–Ω—Ç —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫ `pandas`.

___

![google_scholar_save_sql_05](https://user-images.githubusercontent.com/78694043/147768828-9e383c06-05c2-4a80-bace-a6c85d5dacf5.jpg)

<h2 id="save_sqlite">–°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ SQLite</h2>

–ü–æ—Å–ª–µ —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏ –≤—ã —É–∑–Ω–∞–µ—Ç–µ –æ —Ç–æ–º –∫–∞–∫:
- —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ SQLite –∏—Å–ø–æ–ª—å–∑—É—è `pandas`,
- —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç SQLite,
- –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∏ —Ä–∞–∑—Ä—ã–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å SQLite,
- —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Ç–∞–±–ª–∏—Ü—ã/–∫–æ–ª–æ–Ω–∫–∏,
- –¥–æ–±–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ `for` —Ü–∏–∫–ª–µ.


–ü—Ä–∏–º–µ—Ä —Ç–æ–≥–æ [–∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç SQLite](https://stackoverflow.com/a/19187244/15164646):

```
1. –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
    2. —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è
        3. –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
    4. —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
5. –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ SQLite –∏—Å–ø–æ–ª—å–∑—É—è `pandas`

```python
# https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_sql.html
import sqlite3
import pandas as pd
from google_scholar_organic_results import organic_results
from google_scholar_cite_results import cite_results

conn = sqlite3.connect("google_scholar_results.db")

# —Å–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É –∏ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
conn.execute("""CREATE TABLE google_scholar_organic_results (
                page_number integer,
                position integer,
                result_type text,
                title text, 
                link text,
                snippet text,
                result_id text,
                publication_info_summary text,
                cited_by_count integer,
                cited_by_link text,
                cited_by_id text,
                total_versions integer,
                all_versions_link text,
                all_versions_id text,
                file_format text,
                file_title text,
                file_link text)""")
conn.commit()

# —Å–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É –∏ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è —Ü–∏—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
conn.execute("""CREATE TABLE google_scholar_cite_results (
                organic_results_title text, 
                organic_results_link text,
                citation_title text,
                citation_link text)""")
conn.commit()

# —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ü–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ SQLite
pd.DataFrame(organic_results()).to_sql(name="google_scholar_organic_results", 
                                       con=conn, 
                                       if_exists="append", 
                                       index=False)

# —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ü–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ SQLite
pd.DataFrame(cite_results()).to_sql(name="google_scholar_cite_results", 
                                    con=conn, 
                                    if_exists="append", 
                                    index=False)

conn.commit()
conn.close()
```

- `name` —ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ SQL —Ç–∞–±–ª–∏—Ü—ã.
- `con` —ç—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
- `if_exists` —Å–∫–∞–∂–µ—Ç `pandas` –∫–∞–∫ —Å–µ–±—è –≤–µ—Å—Ç–∏ –µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç `"fail"` –∏ –≤—ã–∑–æ–≤–µ—Ç `raise` –æ—à–∏–±–∫—É `ValueError`. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ `pandas` –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ.
- `index=False` —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –∏–Ω–¥–µ–∫—Å —Å—Ç–æ–ª–±—Ü–æ–≤ –æ—Ç `DataFrame`.

____

### –î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤—Ä—É—á–Ω—É—é –∏—Å–ø–æ–ª—å–∑—É—è –∑–∞–ø—Ä–æ—Å—ã SQLite

```python
import sqlite3

conn = sqlite3.connect("google_scholar_results.db")

conn.execute("""CREATE TABLE google_scholar_organic_results (
                page_number integer,
                position integer,
                result_type text,
                title text, 
                link text,
                snippet text,
                result_id text,
                publication_info_summary text,
                cited_by_count integer,
                cited_by_link text,
                cited_by_id text,
                total_versions integer,
                all_versions_link text,
                all_versions_id text,
                file_format text,
                file_title text,
                file_link text)""")
conn.commit()
            
 conn.execute("""CREATE TABLE google_scholar_cite_results (
                organic_results_title text, 
                organic_results_link text,
                citation_title text,
                citation_link text)""")
conn.commit()

# —Å–æ—Ö—Ä–∞–Ω—è–µ–º –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
for item in organic_results():
    conn.execute("""INSERT INTO google_scholar_organic_results
                    VALUES (:page_number,
                            :position,
                            :result_type,
                            :title,
                            :link,
                            :snippet,
                            :result_id,
                            :publication_info_summary,
                            :cited_by_count,
                            :cited_by_link,
                            :cited_by_id,
                            :total_versions,
                            :all_versions_link,
                            :all_versions_id,
                            :file_format,
                            :file_title,
                            :file_link)""",
                     {"page_number": item["page_number"],
                      "position": item["position"],
                      "result_type": item["type"],
                      "title": item["title"],
                      "link": item["link"],
                      "snippet": item["snippet"],
                      "result_id": item["result_id"],
                      "publication_info_summary": item["publication_info_summary"],
                      "cited_by_count": item["cited_by_count"],
                      "cited_by_link": item["cited_by_link"],
                      "cited_by_id": item["cited_by_id"],
                      "total_versions": item["total_versions"],
                      "all_versions_link": item["all_versions_link"],
                      "all_versions_id": item["all_versions_id"],
                      "file_format": item["file_format"],
                      "file_title": item["file_title"],
                      "file_link": item["file_link"]})
conn.commit()

# —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¶–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
for cite_result in cite_results():
    conn.execute("""INSERT INTO google_scholar_cite_results 
                    VALUES (:organic_result_title,
                    :organic_result_link,
                    :citation_title,
                    :citation_snippet)""",
                 {"organic_result_title": cite_result["organic_result_title"],
                  "organic_result_link": cite_result["organic_result_link"],
                  "citation_title": cite_result["citation_title"],
                  "citation_snippet": cite_result["citation_snippet"]})

conn.commit()
conn.close() # —è–≤–Ω–æ –ª—É—á—à–µ, —á–µ–º –Ω–µ—è–≤–Ω–æ
```

#### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–ø–∏—Å—ã–≤–∞—è –∑–∞–ø—Ä–æ—Å—ã SQLite 

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º `sqlite3` –±–∏–±–ª–∏–æ—Ç–µ–∫—É:

```python
# –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
import sqlite3 
```

–°–æ–µ–¥–∏–Ω—è–µ–º—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –¥–∞—ë–º –Ω–æ–≤–æ–µ –∏–º—è –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```python
conn = sqlite3.connect("google_scholar_results.db")
```

–°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```python
conn.execute("""CREATE TABLE google_scholar_organic_results (
                page_number integer,
                position integer,
                result_type text,
                title text, 
                link text,
                snippet text,
                result_id text,
                publication_info_summary text,
                cited_by_count integer,
                cited_by_link text,
                cited_by_id text,
                total_versions integer,
                all_versions_link text,
                all_versions_id text,
                file_format text,
                file_title text,
                file_link text)""")
conn.commit()
```

–°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É –¶–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```python
conn.execute("""CREATE TABLE google_scholar_cite_results (
            organic_results_title text, 
            organic_results_link text,
            citation_title text,
            citation_link text)""")
conn.commit()
```

–î–æ–±–∞–≤–ª—è–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü—É –∏—Å–ø–æ–ª—å–∑—É—è `for` —Ü–∏–∫–ª:

```python
for item in organic_results():
    conn.execute("""INSERT INTO google_scholar_organic_results
                    VALUES (:page_number,
                            :position,
                            :result_type,
                            :title,
                            :link,
                            :snippet,
                            :result_id,
                            :publication_info_summary,
                            :cited_by_count,
                            :cited_by_link,
                            :cited_by_id,
                            :total_versions,
                            :all_versions_link,
                            :all_versions_id,
                            :file_format,
                            :file_title,
                            :file_link)""",
                     {"page_number": item["page_number"],
                      "position": item["position"],
                      "result_type": item["type"],
                      "title": item["title"],
                      "link": item["link"],
                      "snippet": item["snippet"],
                      "result_id": item["result_id"],
                      "publication_info_summary": item["publication_info_summary"],
                      "cited_by_count": item["cited_by_count"],
                      "cited_by_link": item["cited_by_link"],
                      "cited_by_id": item["cited_by_id"],
                      "total_versions": item["total_versions"],
                      "all_versions_link": item["all_versions_link"],
                      "all_versions_id": item["all_versions_id"],
                      "file_format": item["file_format"],
                      "file_title": item["file_title"],
                      "file_link": item["file_link"]})
conn.commit()
```


–î–æ–±–∞–≤–ª—è–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¶–∏—Ç–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü—É –∏—Å–ø–æ–ª—å–∑—É—è `for` —Ü–∏–∫–ª:

```python
for cite_result in cite_results():
    conn.execute("""INSERT INTO google_scholar_cite_results 
                    VALUES (:organic_result_title,
                    :organic_result_link,
                    :citation_title,
                    :citation_snippet)""",
                 {"organic_result_title": cite_result["organic_result_title"],
                  "organic_result_link": cite_result["organic_result_link"],
                  "citation_title": cite_result["citation_title"],
                  "citation_snippet": cite_result["citation_snippet"]})
conn.commit()
```


–ó–∞–∫—Ä—ã–≤–∞–µ–º c–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:

```python
conn.close()
```

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```python
# —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
conn.execute("DELETE FROM google_scholar_organic_results")

# —É–¥–∞–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
conn.execute("DROP TABLE google_scholar_organic_results")

# —É–¥–∞–ª–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É
conn.execute("ALTER TABLE google_scholar_organic_results DROP COLUMN authors")

# –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–Ω–∫—É
conn.execute("ALTER TABLE google_scholar_organic_results ADD COLUMN snippet text")
```

___

<h2 id="full_code">–ö–æ–¥ —Ü–µ–ª–∏–∫–æ–º - –ø–∞—Ä—Å–∏–Ω–≥</h2>

```python
import os
from serpapi import GoogleSearch
from urllib.parse import urlsplit, parse_qsl


def organic_results():
    print("extracting organic results..")

    params = {
        "api_key": os.getenv("API_KEY"),
        "engine": "google_scholar",
        "q": "minecraft redstone system structure characteristics strength",  # –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
        "hl": "en",        # —è–∑—ã–∫
        "as_ylo": "2017",  # –æ—Ç 2017
        "as_yhi": "2021",  # –¥–æ 2021
        "start": "0"
    }

    search = GoogleSearch(params)

    organic_results_data = []

    loop_is_true = True

    while loop_is_true:
        results = search.get_dict()

        print(f"Currently extracting page ‚Ññ{results['serpapi_pagination']['current']}..")

        for result in results["organic_results"]:
            position = result["position"]
            title = result["title"]
            publication_info_summary = result["publication_info"]["summary"]
            result_id = result["result_id"]
            link = result.get("link")
            result_type = result.get("type")
            snippet = result.get("snippet")
    
            try:
              file_title = result["resources"][0]["title"]
            except: file_title = None
    
            try:
              file_link = result["resources"][0]["link"]
            except: file_link = None
    
            try:
              file_format = result["resources"][0]["file_format"]
            except: file_format = None
    
            try:
              cited_by_count = int(result["inline_links"]["cited_by"]["total"])
            except: cited_by_count = None
    
            cited_by_id = result.get("inline_links", {}).get("cited_by", {}).get("cites_id", {})
            cited_by_link = result.get("inline_links", {}).get("cited_by", {}).get("link", {})
    
            try:
              total_versions = int(result["inline_links"]["versions"]["total"])
            except: total_versions = None
    
            all_versions_link = result.get("inline_links", {}).get("versions", {}).get("link", {})
            all_versions_id = result.get("inline_links", {}).get("versions", {}).get("cluster_id", {})
    
            organic_results_data.append({
              "page_number": results["serpapi_pagination"]["current"],
              "position": position + 1,
              "result_type": result_type,
              "title": title,
              "link": link,
              "result_id": result_id,
              "publication_info_summary": publication_info_summary,
              "snippet": snippet,
              "cited_by_count": cited_by_count,
              "cited_by_link": cited_by_link,
              "cited_by_id": cited_by_id,
              "total_versions": total_versions,
              "all_versions_link": all_versions_link,
              "all_versions_id": all_versions_id,
              "file_format": file_format,
              "file_title": file_title,
              "file_link": file_link,
            })

            if "next" in results["serpapi_pagination"]:
                search.params_dict.update(dict(parse_qsl(urlsplit(results["serpapi_pagination"]["next"]).query)))
            else:
                loop_is_true = False

    return organic_results_data
    
    
def cite_results():

    print("extracting cite results..")

    citation_results = []

    for citation in organic_results():
        params = {
            "api_key": os.getenv("API_KEY"),
            "engine": "google_scholar_cite",
            "q": citation["result_id"]
        }

        search = GoogleSearch(params)
        results = search.get_dict()

        print(f"Currently extracting {citation['result_id']} citation ID.")

        for result in results["citations"]:
            cite_title = result["title"]
            cite_snippet = result["snippet"]

            citation_results.append({
                "organic_result_title": citation["title"],
                "organic_result_link": citation["link"],
                "citation_title": cite_title,
                "citation_snippet": cite_snippet
            })

    return citation_results



# –ø—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQL:
'''
extracting organic results..
Currently extracting page ‚Ññ1..
Currently extracting page ‚Ññ2..
Currently extracting page ‚Ññ3..
Currently extracting page ‚Ññ4..
Currently extracting page ‚Ññ5..
Currently extracting page ‚Ññ6..
Done extracting organic results.
Saved to SQL Lite database.
'''
```

<h2 id="saving_code">–ö–æ–¥ —Ü–µ–ª–∏–∫–æ–º - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</h2>

```python
import pandas as pd
import sqlite3
from google_scholar_organic_results import organic_results
from google_scholar_cite_results import cite_results

# –û–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –∏—Å–ø–æ–ª—å–∑—É—è Pandas
print("waiting for organic results to save..")
organic_df = pd.DataFrame(data=organic_results())
organic_df.to_csv("google_scholar_organic_results.csv", encoding="utf-8", index=False)

print("waiting for cite results to save..")
cite_df = pd.DataFrame(data=cite_results())
cite_df.to_csv("google_scholar_citation_results.csv", encoding="utf-8", index=False)

# ------------------------------

# –î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–§ –≤ —Ä—É—á–Ω—É—é –ø—Ä–æ–ø–∏—Å—ã–≤–∞—è SQLite –∑–∞–ø—Ä–æ—Å—ã
conn = sqlite3.connect("google_scholar_results.db")

conn.execute("""CREATE TABLE google_scholar_organic_results (
                page_number integer,
                position integer,
                result_type text,
                title text,
                link text,
                snippet text,
                result_id text,
                publication_info_summary text,
                cited_by_count integer,
                cited_by_link text,
                cited_by_id text,
                total_versions integer,
                all_versions_link text,
                all_versions_id text,
                file_format text,
                file_title text,
                file_link text)""")
conn.commit()


conn.execute("""CREATE TABLE google_scholar_cite_results (
            organic_results_title text,
            organic_results_link text,
            citation_title text,
            citation_link text)""")
conn.commit()

for item in organic_results():
    conn.execute("""INSERT INTO google_scholar_organic_results
                    VALUES (:page_number,
                            :position,
                            :result_type,
                            :title,
                            :link,
                            :snippet,
                            :result_id,
                            :publication_info_summary,
                            :cited_by_count,
                            :cited_by_link,
                            :cited_by_id,
                            :total_versions,
                            :all_versions_link,
                            :all_versions_id,
                            :file_format,
                            :file_title,
                            :file_link)""",
                 {"page_number": item["page_number"],
                  "position": item["position"],
                  "result_type": item["type"],
                  "title": item["title"],
                  "link": item["link"],
                  "snippet": item["snippet"],
                  "result_id": item["result_id"],
                  "publication_info_summary": item["publication_info_summary"],
                  "cited_by_count": item["cited_by_count"],
                  "cited_by_link": item["cited_by_link"],
                  "cited_by_id": item["cited_by_id"],
                  "total_versions": item["total_versions"],
                  "all_versions_link": item["all_versions_link"],
                  "all_versions_id": item["all_versions_id"],
                  "file_format": item["file_format"],
                  "file_title": item["file_title"],
                  "file_link": item["file_link"]})
conn.commit()


for cite_result in cite_results():
    conn.execute("""INSERT INTO google_scholar_cite_results
                    VALUES (:organic_result_title,
                    :organic_result_link,
                    :citation_title,
                    :citation_snippet)""",
                 {"organic_result_title": cite_result["organic_result_title"],
                  "organic_result_link": cite_result["organic_result_link"],
                  "citation_title": cite_result["citation_title"],
                  "citation_snippet": cite_result["citation_snippet"]})

conn.commit()
conn.close()
print("Saved to SQL Lite database.")


# –ø—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
'''
extracting organic results..
Currently extracting page ‚Ññ1..
...
Currently extracting page ‚Ññ4..
extracting cite results..
extracting organic results..
Currently extracting page ‚Ññ1..
...
Currently extracting page ‚Ññ4..
Currently extracting 60l4wsP6Ps0J citation ID.
Currently extracting 9hkhIFu_BhAJ citation ID.
...
Saved to SQL Lite database.
'''
```

___

<h2 id="links">–°—Å—ã–ª–∫–∏</h2>

- [GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/dimitryzub/py-google-scholar-organic-cite-to-csv-sqlite)
- [–ö–æ–¥ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ CSV –≤ –æ–Ω–ª–∞–π–Ω IDE](https://replit.com/@serpapi/Scrape-historic-Google-Scholar-Organic-and-Citation-results#main.py)
- [Google Scholar API](https://serpapi.com/google-scholar-api)
- [SerpApi –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](https://serpapi.com/libraries)

___

<h2 id="outro">–ß—Ç–æ –¥–∞–ª—å—à–µ</h2>

–° —ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫–æ–µ-–Ω–∏–±—É–¥—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –∏–ª–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ. –ö–ª–∞—Å—Å–Ω—ã–º –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫ —ç—Ç–æ–º—É —Å–∫—Ä–∏–ø—Ç—É –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å –µ–≥–æ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –∏–ª–∏ –º–µ—Å—è—Ü –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

–°–ª–µ–¥—É—é—â–∏–π –±–ª–æ–≥ –ø–æ—Å—Ç –±—É–¥–µ—Ç –æ –ø–∞—Ä—Å–∏–Ω–≥–µ –ü—Ä–æ—Ñ–∏–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, –∞ —Ç–∞–∫ –∂–µ –ê–≤—Ç–æ—Ä—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–∞—Ä—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–∏—Å–∞—Ç—å –ø–∞—Ä—Å–µ—Ä —Å –Ω—É–ª—è, —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –∫–∞–∫ –æ–±–æ–π—Ç–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Ç –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º, –∫–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –æ–±—ä–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤, –∏–ª–∏, –∫–∞–∫ –ø–∞—Ä—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å JavaScript - [–ø–æ–ø—Ä–æ–±—É–π—Ç–µ SerpApi](https://serpapi.com/) –∏–ª–∏ [—Å–≤—è–∂–∏—Ç–µ—Å—å —Å SerpApi](https://serpapi.com/#contact).


___

<p style="text-align: center;">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞–º –Ω–∞ <a href="https://www.reddit.com/r/SerpApi/">Reddit</a> | <a href="https://twitter.com/serp_api">Twitter</a> | <a href="https://www.youtube.com/channel/UCUgIHlYBOD3yA3yDIRhg_mg">YouTube</a></p>

<p style="text-align: center;">–î–æ–±–∞–≤–∏—Ç—å <a href="https://forum.serpapi.com/feature-requests">–∑–∞–ø—Ä–æ—Å –Ω–∞ —Ñ–∏—á—É</a>üí´ –∏–ª–∏ <a href="https://forum.serpapi.com/bugs">—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –±–∞–≥</a>üêû</p>